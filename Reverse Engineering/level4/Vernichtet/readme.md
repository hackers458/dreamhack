# 🧩 Reverse Engineering Challenge: Vernichtet
## 📖 문제 개요
- **문제 이름**: Vernichtet 
- **출처**: 드림핵  
- **키워드**: 안티디버깅, 해밀턴 경로 문제
- **설명**: 안티디버깅으로 된 난독화 프로그램의 해밀턴 경로 문제 프로그램

---

## 🛠️ 사용 도구
- **IDA**: 정적 분석  
- **GDB**: 동적 분석  
- **PyCharm**: 코드 작성  

---

## 🚀 풀이 방법
- 1. IDA로 보았을 때 c로 디컴파일하는 걸 방해하는 코드를 지운다.
- 2. 그 후 프로그램의 동작을 분석하여 요구하는 입력 찾기

---

## 📁 파일 구성
- **main** : 난독화된 프로그램

---

## 🔍 파일 동작 원리

| 단계 | 이미지 | 설명 |
|------|--------|------|
| Step 1 | <img width="1339" height="690" alt="화면 캡처 2026-02-22 013808" src="https://github.com/user-attachments/assets/623b7be7-725a-48ef-a10f-1d3953971909" />| 현재 IDA로 봤을때의 MAIN코드가 박살이 나서 C로 안보인다. 그래서 GDB로 봤는데 한칸 점프하고 ECX를 1더하고1빼는걸 동작한다.<br>이 코드들이 많은걸 보아 한칸점프+inc,dec ecx인 부분을 0x90(nop)으로 바꿔보았다. |
| Step 2 | <img width="737" height="785" alt="화면 캡처 2026-02-22 014047" src="https://github.com/user-attachments/assets/32139950-b459-47cd-b73b-f3302f588e8a" />| 그랬더니 main함수가 보이기 시작했다. 1번은 main 파라미터로 받은 파일의 크기가 225바이트인것, 그리고 2번함수와 3번 함수가 1이 나와야지 플래그를 출력해야 하나보다. 2번 함수부터 보자 |
| Step 3 |  <img width="984" height="232" alt="화면 캡처 2026-02-22 014226" src="https://github.com/user-attachments/assets/b075c1de-fb34-4a7a-bd84-9db6a9ebaa57" />| 해당 코드를 보니 내 입력과 저장된 데이터와 같은지를 비교를 하나 비교 당하는 인덱스는 i*3을, 내 문자열의 인덱스는 각 식의 결과로 접근한다. <br>이를 보아 몇몇 문자들은 정해진 걸 알 수 있다.|
| Step 4 |  <img width="594" height="868" alt="화면 캡처 2026-02-22 014409" src="https://github.com/user-attachments/assets/5cd367b3-efc2-4204-93e3-819c5b4a042f" />| 그리곤 1이 있는 좌표로 가 1을 기준으로 위 아래 오른쪽 왼쪽 사방팔방 대각선(?)을 탐색하여 자기 제외 8칸을 탐색한다. 탐색하는건 본인 +1의 숫자를 찾는다. 즉 이 알고리즘은 1~225을 채워 1부터 225까지 쭉 갈 수 있게 만드는 해밍턴 문제이다.|


---

## 🧠 접근 방법
- 백트래킹으로 접근하면 된다.  

| 이미지 | 설명 |
| --- | --- |
| <img width="403" height="618" alt="화면 캡처 2026-02-22 020230" src="https://github.com/user-attachments/assets/54fe022b-6a65-44da-ba6b-7d375bfaaf08" />| 해당 사진을 보면 만약 3을 둿을때 4가 업으므로 3을 기준으로 8칸에 -1인 곳에 4를 두는데 만약 이어지지 않는다면 다른 곳에 4를 두면 된다. 이는 백트래킹으로 쭉 이어갈 수 있게 하면 된다. |

---

## 😪 막힌 부분
- 난독화 부분은 전혀 어렵지 않았다. GDB에서 실행이 잘 되는거 봐서는 코드에는 문제가 없었기에.. 하지만 위의 스텝4의 코드 부분이 어려웠다. 특히 저걸 이해했어도 백트래킹을 요구하는 걸 몰랐다. ai의 조교 - 학생 도움으로 겨우 풀었다.

---

## 📚 공부한 내용
- 백트래킹에 대해 다시 한번 복습할 수 있게 되었다. 

---

## 📗 비고
- 정렬 문제라는 건 보자마자 알았다.  
- 백준 문제를 풀다 보면 특정 조건(`lambda`)을 두고 정렬하는 경우가 많아, 그 경험 덕분에 접근이 조금 더 수월했다.  
