# 🧩 Reverse Engineering Challenge: similar

📖 문제 개요

- 문제 이름: similar
- 출처: 드림핵
- 키워드: 구조체
- 설명: 파라미터가 어떻게 전달되는지 확인 한 후 간단 연산을 하면 된다.

# 🛠️ 사용 도구

- GDB : 동적 분석
- vscode : 코드 분석

# 🚀 풀이 방법

- 파라미터를 잘 본 뒤 파악을 잘 하면 된다.

# 📁 파일 구성

- flag : 플래그 저장 파일(로컬)
- similar : 여러 복잡한 연산을 통해 나오는 결과

# 🔍 파일 동작 원리
<img width="559" height="702" alt="화면 캡처 2026-01-06 032508" src="https://github.com/user-attachments/assets/eb7c5ffe-bdd3-4f30-957e-afc244af84b8" />

현재 사진에 각 배열마다 이상한 값을 넣고 마지막에 인덱스를 넣는다.
그리고 출력을 인덱스 : 값1 값2 값3을 하는데 이게 무엇일까?
그리고 qsort를 보니 저장된 배열과 30, 16, 그리고 compare함수가 있다.
자 생각해보자, 만약 저게 배열이면 크기가 16이 아닌 4가 되어야 한다. 하지만 16인 이유는 무엇일까? 바로 데이터 집합이기 때문이다.
즉 구조체이기에 16으로 한거다.
즉 구조체[30]를 정렬하는것이다. 그러면 어떤 방식으로 정렬하는걸까?

<img width="358" height="259" alt="화면 캡처 2026-01-06 032724" src="https://github.com/user-attachments/assets/96271ee5-e86c-4684-8aab-1c2077d4c5b1" />

사진을 보면 int64로 되있다.. 분명 int은 32비트이므로 int 32이어야 하는데 이게 뭘까?
즉 a1을 64로 받은건 메모리 주소를 생각할때
Struct a{
int x
int y
int z
int index} 이렇게 되있을탠데
a1*64는 x와 y를 담고 있으며
a1[1]은 z와 인덱스를 담고 있다.
하지만 리틀엔디언으로 생각하면 a1의 상위 32비트는 y 하위 32비트는 x a1[1]의 상위는 인덱스 하위는 z값을 가진다.
즉 __int64 -> int로 형변환하면 하위 값을 가진다.
그 래 서
<img width="828" height="124" alt="화면 캡처 2026-01-06 032925" src="https://github.com/user-attachments/assets/a13a1350-219b-4ce4-a107-e05d8761b754" />

저 HIDWORD(x)의 값은 y의 값이 되며 (int)x의 값은 x, int y는 z값이 된다.

참고로 저 연산은

1 - (x+y+z) / (sqrt(x^2+y^2+z^2) * sqrt(3))이다.



# 🧠 접근 방법

저 위의 연산 결과로 정렬을 한 결과의 구조체 배열의 0~29의 인덱스를 보내준다.

# 📚 공부한 내용

- int64와 HIDWORD 그리고 구조체가 어떻게 전달되는지와 구조체인지 아닌지 확인하는 방법을 배웠으나 직접 코딩을 하여 실습을 해보아야 겠다.
